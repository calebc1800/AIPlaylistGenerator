Here's a ~45-second walkthrough. When the dashboard loads, we pull a user's Spotify tracks, normalize genres, and cache the snapshot. A prompt hits the LLM for mood, genre, energy, and named artists; the cache is keyed by user and prompt for 15 minutes. Seeds land in this order: named-artist top tracks; cached tracks from the target genre; resolved LLM title/artist pairs; genre playlists when seeds are light. Candidates come from playlist searches, filtered for market and genre. Each candidate is scored for popularity, seed overlap, focus-artist bonus, title keywords, year/energy alignment, cache affinity, and novelty. Scores are clamped, we cap two songs per artist, stitch seeds with top scorers, cache the payload, and the debug view shows steps, scores, and the snapshot.
